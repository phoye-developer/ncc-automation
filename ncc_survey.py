import http.client
import urllib.parse
import json


def get_survey(ncc_location: str, ncc_token: str, survey_id: str) -> list:
    """
    This function fetches the details of a survey present on the Nextiva Contact Center (NCC) tenant.
    """
    survey = {}
    conn = http.client.HTTPSConnection(ncc_location)
    payload = ""
    headers = {"Authorization": ncc_token}
    try:
        conn.request("GET", f"/data/api/types/survey/{survey_id}", payload, headers)
        res = conn.getresponse()
        if res.status == 200:
            data = res.read().decode("utf-8")
            survey = json.loads(data)
    except:
        pass
    conn.close()
    return survey


def search_surveys(ncc_location: str, ncc_token: str, survey_name: str) -> dict:
    """
    This function searches for an existing survey with the same name as the intended new survey.
    """
    survey = {}
    conn = http.client.HTTPSConnection(ncc_location)
    payload = ""
    headers = {"Authorization": ncc_token}
    url_encoded_name = urllib.parse.quote(survey_name)
    try:
        conn.request(
            "GET",
            f"/data/api/types/survey?q={url_encoded_name}",
            payload,
            headers,
        )
        res = conn.getresponse()
        if res.status == 200:
            data = res.read().decode("utf-8")
            json_data = json.loads(data)
            total = json_data["total"]
            if total > 0:
                results = json_data["objects"]
                for result in results:
                    if result["name"] == survey_name:
                        survey = result
                        break
    except:
        pass
    conn.close()
    return survey


def search_campaign_surveys(
    ncc_location: str, ncc_token: str, campaign_name: str
) -> dict:
    """
    This function searches for existing surveys in Nextiva Contact Center (NCC) whose name begins with the specified campaign name.
    """
    surveys = []
    conn = http.client.HTTPSConnection(ncc_location)
    payload = ""
    headers = {"Authorization": ncc_token}
    url_encoded_name = urllib.parse.quote(campaign_name)
    try:
        conn.request(
            "GET",
            f"/data/api/types/survey?q={url_encoded_name}",
            payload,
            headers,
        )
        res = conn.getresponse()
        if res.status == 200:
            data = res.read().decode("utf-8")
            json_data = json.loads(data)
            total = json_data["total"]
            if total > 0:
                results = json_data["objects"]
                for result in results:
                    if str(result["name"]).startswith(campaign_name):
                        surveys.append(result)
    except:
        pass
    conn.close()
    return surveys


def create_survey(
    ncc_location: str,
    ncc_token: str,
    survey_name: str,
    survey_body: dict,
    survey_theme: dict,
) -> dict:
    """
    This function creates a survey with a specified name.
    """
    survey = {}
    conn = http.client.HTTPSConnection(ncc_location)
    survey_body["localizations"]["name"]["en"]["value"] = survey_name
    survey_body["surveythemeId"] = survey_theme["_id"]
    survey_body["expansions"]["surveythemeId"]["localizations"]["name"]["en"][
        "value"
    ] = survey_theme["name"]
    payload = json.dumps(survey_body)
    headers = {
        "Authorization": ncc_token,
        "Content-Type": "application/json",
    }
    try:
        conn.request("POST", "/data/api/types/survey/", payload, headers)
        res = conn.getresponse()
        if res.status == 201:
            data = res.read().decode("utf-8")
            survey = json.loads(data)
    except:
        pass
    conn.close()
    return survey


def create_user_survey(
    ncc_location: str,
    ncc_token: str,
    survey_name: str,
    survey_categories: list,
    survey_theme: dict,
) -> dict:
    """
    This function creates a survey with a specified name.
    """
    survey = {}
    conn = http.client.HTTPSConnection(ncc_location)
    payload = json.dumps(
        {
            "hideSurveyBoxShadown": False,
            "type": "full",
            "showFooter": False,
            "surveythemeId": survey_theme["_id"],
            "showTabs": True,
            "expansions": {
                "surveythemeId": {
                    "localizations": {
                        "name": {
                            "en": {"language": "en", "value": survey_theme["name"]}
                        }
                    }
                }
            },
            "showBottomNavigatorPage": False,
            "height": 700,
            "debug": False,
            "localizations": {"name": {"en": {"language": "en", "value": survey_name}}},
            "showHeader": False,
            "allowTabinationMandatoryFields": True,
            "entryPanelId": "66c540d6a14be123ae577468",
            "layout": {
                "elements": [
                    {
                        "icon": "icon-survey",
                        "name": "Panel",
                        "description": "Basic component to display content in a survey",
                        "type": "panel",
                        "component": "panel",
                        "elements": [
                            {
                                "icon": "icon-ui-text",
                                "name": "Text",
                                "description": "Displays direct text to the customer",
                                "type": "label",
                                "component": "label",
                                "elements": [],
                                "properties": {
                                    "label": "Contact Info",
                                    "fontSize": 20,
                                    "width": "100%",
                                    "margin": "10px 10px 0px 10px",
                                    "alignment": "left",
                                },
                                "_id": "66c6d1673427fd785dfc98ae",
                                "selected": False,
                                "show": True,
                            },
                            {
                                "icon": "icon-survey",
                                "name": "Panel",
                                "description": "Basic component to display content in a survey",
                                "type": "panel",
                                "component": "panel",
                                "elements": [
                                    {
                                        "icon": "icon-survey",
                                        "name": "Panel",
                                        "description": "Basic component to display content in a survey",
                                        "type": "panel",
                                        "component": "panel",
                                        "elements": [
                                            {
                                                "icon": "icon-ui-input",
                                                "name": "Input",
                                                "description": "A box for the customer to enter information",
                                                "type": "input",
                                                "component": "input",
                                                "elements": [],
                                                "properties": {
                                                    "label": "First Name",
                                                    "labelInReport": "firstName",
                                                    "fontSize": 16,
                                                    "width": "100%",
                                                    "fieldname": "firstName",
                                                    "defaultValue": '${workitem.contact?.firstName || ""}',
                                                    "mandatory": False,
                                                    "readOnly": False,
                                                    "validateOnInput": False,
                                                    "sensitiveData": False,
                                                    "saveToLocalStorage": False,
                                                },
                                                "_id": "66c6c8057e27eb6683f02546",
                                                "selected": False,
                                                "show": True,
                                            }
                                        ],
                                        "properties": {
                                            "label": "",
                                            "labelAlignment": "center",
                                            "labelFontSize": "24",
                                            "descriptionAlignment": "left",
                                            "descriptionFontSize": "24",
                                            "tabLabel": "First Name",
                                            "alignment": "center",
                                            "canCollapse": False,
                                            "state": False,
                                            "scroll": False,
                                            "showScrollbar": False,
                                            "vertical": "full",
                                            "direction": "column",
                                            "width": "100%",
                                            "margin": "10px 4px 4px 10px",
                                            "panelShadow": False,
                                            "showOverlay": False,
                                            "showHeader": False,
                                            "allowPanelInDashboard": False,
                                        },
                                        "_id": "66c6c7d76222b158d78bc27d",
                                        "selected": False,
                                        "show": True,
                                    },
                                    {
                                        "icon": "icon-survey",
                                        "name": "Panel",
                                        "description": "Basic component to display content in a survey",
                                        "type": "panel",
                                        "component": "panel",
                                        "elements": [
                                            {
                                                "icon": "icon-ui-input",
                                                "name": "Input",
                                                "description": "A box for the customer to enter information",
                                                "type": "input",
                                                "component": "input",
                                                "elements": [],
                                                "properties": {
                                                    "label": "Last Name",
                                                    "labelInReport": "lastName",
                                                    "fontSize": 16,
                                                    "width": "100%",
                                                    "fieldname": "lastName",
                                                    "defaultValue": '${workitem.contact?.lastName || ""}',
                                                    "mandatory": False,
                                                    "readOnly": False,
                                                    "validateOnInput": False,
                                                    "sensitiveData": False,
                                                    "saveToLocalStorage": False,
                                                },
                                                "_id": "66c6c84621c6ba30400e9d8c",
                                                "selected": False,
                                                "show": True,
                                            }
                                        ],
                                        "properties": {
                                            "label": "",
                                            "labelAlignment": "center",
                                            "labelFontSize": "24",
                                            "descriptionAlignment": "left",
                                            "descriptionFontSize": "24",
                                            "tabLabel": "Last Name",
                                            "alignment": "center",
                                            "canCollapse": False,
                                            "state": False,
                                            "scroll": False,
                                            "showScrollbar": False,
                                            "vertical": "full",
                                            "direction": "column",
                                            "width": "100%",
                                            "margin": "10px 10px 4px 4px",
                                            "panelShadow": False,
                                            "showOverlay": False,
                                            "showHeader": False,
                                            "allowPanelInDashboard": False,
                                        },
                                        "_id": "66c6c7f5e514d687d7234f30",
                                        "selected": False,
                                        "show": True,
                                    },
                                ],
                                "properties": {
                                    "label": "",
                                    "labelAlignment": "left",
                                    "labelFontSize": 20,
                                    "descriptionAlignment": "left",
                                    "descriptionFontSize": "24",
                                    "tabLabel": "Name",
                                    "alignment": "left",
                                    "canCollapse": False,
                                    "state": False,
                                    "scroll": False,
                                    "showScrollbar": False,
                                    "vertical": "fit",
                                    "direction": "row",
                                    "width": "100%",
                                    "panelShadow": False,
                                    "showOverlay": False,
                                    "showHeader": False,
                                    "allowPanelInDashboard": False,
                                },
                                "_id": "66c6c7b873f2a34fd26a73bf",
                                "selected": False,
                                "show": True,
                            },
                            {
                                "icon": "icon-ui-text",
                                "name": "Text",
                                "description": "Displays direct text to the customer",
                                "type": "label",
                                "component": "label",
                                "elements": [],
                                "properties": {
                                    "label": "Workitem Info",
                                    "fontSize": 20,
                                    "width": "100%",
                                    "margin": "20px 10px 0px 10px",
                                    "alignment": "left",
                                },
                                "_id": "66c6e5a8ab42181be0f9e5de",
                                "selected": False,
                                "show": True,
                            },
                            {
                                "icon": "icon-survey",
                                "name": "Panel",
                                "description": "Basic component to display content in a survey",
                                "type": "panel",
                                "component": "panel",
                                "elements": [
                                    {
                                        "icon": "icon-survey",
                                        "name": "Panel",
                                        "description": "Basic component to display content in a survey",
                                        "type": "panel",
                                        "component": "panel",
                                        "elements": [
                                            {
                                                "icon": "icon-ui-select",
                                                "name": "Select",
                                                "description": "A drop-down to select one value from a list of values",
                                                "type": "select",
                                                "component": "select",
                                                "elements": [],
                                                "properties": {
                                                    "label": "Category",
                                                    "labelInReport": "category",
                                                    "fontSize": 16,
                                                    "width": "",
                                                    "fieldname": "category",
                                                    "options": survey_categories,
                                                    "mandatory": True,
                                                    "sortOnField": "label",
                                                },
                                                "_id": "67b2499a5c4c9b37da9891b0",
                                                "selected": False,
                                                "show": True,
                                            }
                                        ],
                                        "properties": {
                                            "label": "",
                                            "labelAlignment": "center",
                                            "labelFontSize": "24",
                                            "descriptionAlignment": "left",
                                            "descriptionFontSize": "24",
                                            "tabLabel": "Category",
                                            "alignment": "left",
                                            "canCollapse": False,
                                            "state": False,
                                            "scroll": False,
                                            "showScrollbar": False,
                                            "vertical": "fit",
                                            "direction": "column",
                                            "width": "100%",
                                            "margin": "10px 4px 4px 10px",
                                            "panelShadow": False,
                                            "showOverlay": False,
                                            "showHeader": False,
                                            "allowPanelInDashboard": False,
                                        },
                                        "_id": "66c6e6b5bd5e6e4c67f0a8b3",
                                        "selected": False,
                                        "show": True,
                                    },
                                    {
                                        "icon": "icon-survey",
                                        "name": "Panel",
                                        "description": "Basic component to display content in a survey",
                                        "type": "panel",
                                        "component": "panel",
                                        "elements": [
                                            {
                                                "icon": "icon-ui-textarea",
                                                "name": "Textarea",
                                                "description": "Takes large amounts of text from the customer",
                                                "type": "textarea",
                                                "component": "textarea",
                                                "elements": [],
                                                "properties": {
                                                    "label": "Agent Notes",
                                                    "labelInReport": "agentNotes",
                                                    "fontSize": 16,
                                                    "width": "100%",
                                                    "fieldname": "agentNotes",
                                                    "mandatory": False,
                                                    "validateOnInput": False,
                                                    "sensitiveData": False,
                                                },
                                                "_id": "67b24a9ad1229dc175af08ea",
                                                "selected": False,
                                                "show": True,
                                            }
                                        ],
                                        "properties": {
                                            "label": "",
                                            "labelAlignment": "left",
                                            "labelFontSize": "24",
                                            "descriptionAlignment": "left",
                                            "descriptionFontSize": "24",
                                            "tabLabel": "Agent Notes",
                                            "alignment": "center",
                                            "canCollapse": False,
                                            "state": False,
                                            "scroll": False,
                                            "showScrollbar": False,
                                            "vertical": "fit",
                                            "direction": "column",
                                            "width": "100%",
                                            "margin": "10px 4px 4px 10px",
                                            "panelShadow": False,
                                            "showOverlay": False,
                                            "showHeader": False,
                                            "allowPanelInDashboard": False,
                                        },
                                        "_id": "67b24a41dcc526e3960c1c46",
                                        "selected": False,
                                        "show": True,
                                    },
                                ],
                                "properties": {
                                    "label": "",
                                    "labelAlignment": "center",
                                    "labelFontSize": "24",
                                    "descriptionAlignment": "left",
                                    "descriptionFontSize": "24",
                                    "tabLabel": "Workitem Info",
                                    "alignment": "center",
                                    "canCollapse": False,
                                    "state": False,
                                    "scroll": False,
                                    "showScrollbar": False,
                                    "vertical": "fit",
                                    "direction": "column",
                                    "width": "100%",
                                    "panelShadow": False,
                                    "showOverlay": False,
                                    "showHeader": False,
                                    "allowPanelInDashboard": False,
                                },
                                "_id": "66c6e66937d5e87ab51ca611",
                                "selected": False,
                                "show": True,
                            },
                        ],
                        "properties": {
                            "label": "",
                            "labelAlignment": "center",
                            "labelFontSize": "24",
                            "descriptionAlignment": "left",
                            "descriptionFontSize": "24",
                            "tabLabel": "Main",
                            "alignment": "left",
                            "canCollapse": False,
                            "state": False,
                            "scroll": False,
                            "showScrollbar": False,
                            "vertical": "full",
                            "direction": "column",
                            "width": "",
                            "panelShadow": False,
                            "showOverlay": False,
                            "showHeader": False,
                            "allowPanelInDashboard": False,
                            "main": True,
                        },
                        "_id": "66c540d6a14be123ae577468",
                        "panelId": "refId1724193616114",
                        "selected": False,
                        "show": True,
                    }
                ],
                "footer": {
                    "icon": "icon-ui-footer",
                    "name": "Footer",
                    "description": "Displays navigation buttons at the bottom of a survey",
                    "type": "footer",
                    "component": "footer",
                    "elements": [],
                    "properties": {
                        "type": "iconButton",
                        "icon": "icon-next",
                        "size": "24",
                    },
                    "_id": "66c540d375b7e61ab8322d44",
                },
                "header": {
                    "icon": "icon-ui-header",
                    "name": "Header",
                    "description": "Displays navigation buttons at the top of a survey",
                    "type": "header",
                    "component": "header",
                    "elements": [],
                    "properties": {
                        "showPrevious": False,
                        "showOptions": False,
                        "icon": "icon-next",
                        "showClose": False,
                        "size": "24",
                        "titleFontSize": "24",
                    },
                    "_id": "66c540d37bf6ce297c2edf6a",
                },
                "overlay": {
                    "icon": "icon-ui-panels",
                    "name": "Overlay Panel",
                    "description": "This panel will always be visible and allow the user to minimise or maxime it.",
                    "type": "overlay",
                    "component": "overlay",
                    "elements": [],
                    "properties": {
                        "label": "Overlay Panel",
                        "labelAlignment": "left",
                        "labelFontSize": "24",
                        "descriptionAlignment": "left",
                        "descriptionFontSize": "24",
                        "alignment": "justify",
                        "canCollapse": False,
                        "state": False,
                        "scroll": False,
                        "vertical": "full",
                        "direction": "column",
                        "height": 80,
                    },
                    "_id": "66c540d37805cb06b8f68dd1",
                },
            },
            "width": 700,
            "name": survey_name,
            "showTopNavigatorPage": False,
            "usePanelShadow": True,
            "font": "Rubik:400,400i,700;Rubik, sans-serif",
        }
    )
    headers = {
        "Authorization": ncc_token,
        "Content-Type": "application/json",
    }
    try:
        conn.request("POST", "/data/api/types/survey/", payload, headers)
        res = conn.getresponse()
        if res.status == 201:
            data = res.read().decode("utf-8")
            survey = json.loads(data)
    except:
        pass
    conn.close()
    return survey


def create_chat_survey(
    ncc_location: str,
    ncc_token: str,
    survey_name: str,
    survey_options: list,
    survey_theme: dict,
    queues: list,
) -> dict:
    """
    This function creates a survey with a specified name.
    """
    survey = {}
    conn = http.client.HTTPSConnection(ncc_location)
    payload = json.dumps(
        {
            "hideSurveyBoxShadown": False,
            "type": "full",
            "showFooter": False,
            "surveythemeId": survey_theme["_id"],
            "showTabs": False,
            "expansions": {
                "surveythemeId": {
                    "localizations": {
                        "name": {
                            "en": {"language": "en", "value": survey_theme["name"]}
                        }
                    }
                }
            },
            "showBottomNavigatorPage": False,
            "height": 640,
            "debug": False,
            "localizations": {"name": {"en": {"language": "en", "value": survey_name}}},
            "showHeader": False,
            "allowTabinationMandatoryFields": False,
            "entryPanelId": "67ba83b975fec76053ef0cda",
            "layout": {
                "elements": [
                    {
                        "icon": "icon-survey",
                        "name": "Panel",
                        "description": "Basic component to display content in a survey",
                        "type": "panel",
                        "component": "panel",
                        "elements": [
                            {
                                "icon": "icon-survey",
                                "name": "Panel",
                                "description": "Basic component to display content in a survey",
                                "type": "panel",
                                "component": "panel",
                                "elements": [
                                    {
                                        "icon": "icon-ui-text",
                                        "name": "Text",
                                        "description": "Displays direct text to the customer",
                                        "type": "label",
                                        "component": "label",
                                        "elements": [],
                                        "properties": {
                                            "label": "<strong>We look forward to chatting with you !</strong>",
                                            "fontSize": 18,
                                            "width": "100%",
                                            "margin": "",
                                            "alignment": "center",
                                        },
                                        "_id": "67ba83e6c266abbc1f8bfcf7",
                                        "selected": False,
                                        "show": True,
                                    }
                                ],
                                "properties": {
                                    "label": "",
                                    "labelAlignment": "left",
                                    "labelFontSize": "24",
                                    "descriptionAlignment": "left",
                                    "descriptionFontSize": "24",
                                    "tabLabel": "Welcome Text",
                                    "alignment": "center",
                                    "canCollapse": False,
                                    "state": False,
                                    "scroll": False,
                                    "showScrollbar": False,
                                    "vertical": "fit",
                                    "direction": "column",
                                    "margin": "8px",
                                    "panelBackgroundColor": "#ffffff",
                                    "panelShadow": False,
                                    "showOverlay": False,
                                    "showHeader": False,
                                    "allowPanelInDashboard": False,
                                },
                                "_id": "67ba83d72b4cbe1c205f5c24",
                                "selected": False,
                                "show": True,
                            },
                            {
                                "icon": "icon-survey",
                                "name": "Panel",
                                "description": "Basic component to display content in a survey",
                                "type": "panel",
                                "component": "panel",
                                "elements": [
                                    {
                                        "icon": "icon-html",
                                        "name": "HTML",
                                        "description": "Allows custom HTML to be displayed in a survey",
                                        "type": "html",
                                        "component": "label",
                                        "elements": [],
                                        "properties": {
                                            "label": '<!DOCTYPE html>\n<html>\n<style>\nimg {\n  border-radius:8px;\n  width: 360px;\n}\n</style>\n<body>\n\n<img src="https://gomez.app/mm_demo/default_automation.png" alt="Agent" width="360" height="180">\n\n</body>\n</html>',
                                            "margin": "",
                                        },
                                        "_id": "67ba84e1b5f083bd7843f0d4",
                                        "selected": False,
                                        "show": True,
                                    }
                                ],
                                "properties": {
                                    "label": "",
                                    "labelAlignment": "left",
                                    "labelFontSize": "24",
                                    "descriptionAlignment": "left",
                                    "descriptionFontSize": "24",
                                    "tabLabel": "Sales",
                                    "alignment": "justify",
                                    "canCollapse": False,
                                    "state": False,
                                    "scroll": False,
                                    "showScrollbar": False,
                                    "vertical": "fit",
                                    "direction": "column",
                                    "margin": "8px",
                                    "panelShadow": False,
                                    "showOverlay": False,
                                    "showHeader": False,
                                    "allowPanelInDashboard": False,
                                },
                                "_id": "67ba84d00e2a21b2dc1b82fb",
                                "selected": False,
                                "show": True,
                            },
                            {
                                "icon": "icon-survey",
                                "name": "Panel",
                                "description": "Basic component to display content in a survey",
                                "type": "panel",
                                "component": "panel",
                                "elements": [
                                    {
                                        "icon": "icon-ui-radio",
                                        "name": "Radio button",
                                        "description": "Displays mutually exclusive values, and only one can be selected",
                                        "type": "radio",
                                        "component": "radio",
                                        "elements": [],
                                        "properties": {
                                            "label": "<b>Please select an option below to help route you to the best resource.</b>",
                                            "labelInReport": "interest",
                                            "fontSize": "14",
                                            "orientation": "vertical",
                                            "margin": "8px",
                                            "maxHeight": "",
                                            "fieldname": "interest",
                                            "options": survey_options,
                                            "wrapOptions": False,
                                            "mandatory": False,
                                        },
                                        "_id": "67c394b0edae2169d340189d",
                                        "selected": False,
                                        "show": True,
                                    },
                                    {
                                        "icon": "icon-ui-move-to-panel",
                                        "name": "Move To Panel",
                                        "description": "Moves to a specific panel in a survey",
                                        "type": "move",
                                        "component": "move",
                                        "elements": [],
                                        "properties": {
                                            "label": "Next > >",
                                            "fontSize": 16,
                                            "buttonWidth": "80%",
                                            "buttonPadding": "8px",
                                            "buttonMargin": "8px",
                                            "variables": [],
                                            "panelId": "67ba9c7488f1ea7e2caf1493",
                                            "hideApplication": False,
                                            "style": "<style>\ndiv {\n  border: 0px solid;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.2), 0 3px 10px 0 rgba(0, 0, 0, 0.19);\n  background-size: cover;\n  background-position: center;\n}\n</style>",
                                            "sendMessageToWorkflow": False,
                                            "properties": [],
                                        },
                                        "_id": "67c3b09480a8bc32c2d18d29",
                                        "selected": False,
                                        "show": True,
                                    },
                                ],
                                "properties": {
                                    "label": "",
                                    "labelAlignment": "left",
                                    "labelFontSize": "24",
                                    "descriptionAlignment": "left",
                                    "descriptionFontSize": "24",
                                    "alignment": "justify",
                                    "canCollapse": False,
                                    "state": False,
                                    "scroll": False,
                                    "showScrollbar": False,
                                    "vertical": "full",
                                    "direction": "column",
                                    "margin": "8px",
                                    "panelShadow": False,
                                    "showOverlay": False,
                                    "showHeader": False,
                                    "allowPanelInDashboard": False,
                                },
                                "_id": "67c38caa2be34a416953a734",
                                "selected": False,
                                "show": True,
                            },
                        ],
                        "properties": {
                            "label": "",
                            "labelAlignment": "left",
                            "labelFontSize": "24",
                            "descriptionAlignment": "left",
                            "descriptionFontSize": "24",
                            "tabLabel": "Main",
                            "alignment": "justify",
                            "canCollapse": False,
                            "state": False,
                            "scroll": False,
                            "showScrollbar": False,
                            "vertical": "full",
                            "direction": "column",
                            "panelBackgroundColor": "#ffffff",
                            "panelShadow": True,
                            "panelBorderRadius": "16px",
                            "showOverlay": False,
                            "showHeader": False,
                            "allowPanelInDashboard": False,
                            "main": True,
                        },
                        "_id": "67ba83b975fec76053ef0cda",
                        "panelId": "refId1740270998977",
                        "selected": False,
                        "show": True,
                    },
                    {
                        "icon": "icon-survey",
                        "name": "Panel",
                        "description": "Basic component to display content in a survey",
                        "type": "panel",
                        "component": "panel",
                        "elements": [
                            {
                                "icon": "icon-ui-text",
                                "name": "Text",
                                "description": "Displays direct text to the customer",
                                "type": "label",
                                "component": "label",
                                "elements": [],
                                "properties": {
                                    "label": "<strong>In case we get disconnected, please let us know how to reach you.</strong>",
                                    "fontSize": 16,
                                    "margin": "8px",
                                    "alignment": "center",
                                },
                                "_id": "67ba9cbcf3e870c586429180",
                                "selected": False,
                                "show": True,
                            },
                            {
                                "icon": "icon-survey",
                                "name": "Panel",
                                "description": "Basic component to display content in a survey",
                                "type": "panel",
                                "component": "panel",
                                "elements": [
                                    {
                                        "icon": "icon-ui-input",
                                        "name": "Input",
                                        "description": "A box for the customer to enter information",
                                        "type": "input",
                                        "component": "input",
                                        "elements": [],
                                        "properties": {
                                            "label": "First Name",
                                            "labelInReport": "firstName",
                                            "fontSize": "14",
                                            "width": "50%",
                                            "margin": "8px",
                                            "fieldname": "firstName",
                                            "mandatory": False,
                                            "readOnly": False,
                                            "validateOnInput": False,
                                            "sensitiveData": False,
                                            "saveToLocalStorage": False,
                                        },
                                        "_id": "67ba9d1fe7cad1d0ff87460b",
                                        "selected": False,
                                        "show": True,
                                    },
                                    {
                                        "icon": "icon-ui-input",
                                        "name": "Input",
                                        "description": "A box for the customer to enter information",
                                        "type": "input",
                                        "component": "input",
                                        "elements": [],
                                        "properties": {
                                            "label": "Last Name",
                                            "labelInReport": "lastName",
                                            "fontSize": "14",
                                            "width": "50%",
                                            "margin": "8px",
                                            "fieldname": "lastName",
                                            "mandatory": False,
                                            "readOnly": False,
                                            "validateOnInput": False,
                                            "sensitiveData": False,
                                            "saveToLocalStorage": False,
                                        },
                                        "_id": "67ba9d21fc9c2b44a02e5d88",
                                        "selected": False,
                                        "show": True,
                                    },
                                ],
                                "properties": {
                                    "label": "",
                                    "labelAlignment": "left",
                                    "labelFontSize": "24",
                                    "descriptionAlignment": "left",
                                    "descriptionFontSize": "24",
                                    "tabLabel": "First Last Name",
                                    "alignment": "center",
                                    "canCollapse": False,
                                    "state": False,
                                    "scroll": False,
                                    "showScrollbar": False,
                                    "vertical": "fit",
                                    "direction": "row",
                                    "margin": "8px",
                                    "panelShadow": False,
                                    "showOverlay": False,
                                    "showHeader": False,
                                    "allowPanelInDashboard": False,
                                },
                                "_id": "67ba9d0095ca495555585804",
                                "selected": False,
                                "show": True,
                            },
                            {
                                "icon": "icon-survey",
                                "name": "Panel",
                                "description": "Basic component to display content in a survey",
                                "type": "panel",
                                "component": "panel",
                                "elements": [
                                    {
                                        "icon": "icon-ui-input",
                                        "name": "Input",
                                        "description": "A box for the customer to enter information",
                                        "type": "input",
                                        "component": "input",
                                        "elements": [],
                                        "properties": {
                                            "label": "Email",
                                            "labelInReport": "email",
                                            "fontSize": "14",
                                            "width": "50%",
                                            "margin": "8px",
                                            "fieldname": "email",
                                            "mandatory": False,
                                            "readOnly": False,
                                            "validateOnInput": False,
                                            "sensitiveData": False,
                                            "saveToLocalStorage": False,
                                        },
                                        "_id": "67baa04d2491a1dcb97b6cff",
                                        "selected": False,
                                        "show": True,
                                    },
                                    {
                                        "icon": "icon-ui-input",
                                        "name": "Input",
                                        "description": "A box for the customer to enter information",
                                        "type": "input",
                                        "component": "input",
                                        "elements": [],
                                        "properties": {
                                            "label": "Phone",
                                            "labelInReport": "phone",
                                            "fontSize": "14",
                                            "width": "50%",
                                            "margin": "8px",
                                            "fieldname": "phone",
                                            "mandatory": False,
                                            "readOnly": False,
                                            "validateOnInput": False,
                                            "sensitiveData": False,
                                            "saveToLocalStorage": False,
                                        },
                                        "_id": "67baa0504a48172215e7bbd6",
                                        "selected": False,
                                        "show": True,
                                    },
                                ],
                                "properties": {
                                    "label": "",
                                    "labelAlignment": "left",
                                    "labelFontSize": "24",
                                    "descriptionAlignment": "left",
                                    "descriptionFontSize": "24",
                                    "tabLabel": "Email and Phone",
                                    "alignment": "left",
                                    "canCollapse": False,
                                    "state": False,
                                    "scroll": False,
                                    "showScrollbar": False,
                                    "vertical": "fit",
                                    "direction": "row",
                                    "margin": "8px",
                                    "panelShadow": False,
                                    "showOverlay": False,
                                    "showHeader": False,
                                    "allowPanelInDashboard": False,
                                },
                                "_id": "67baa046d3819f210d279216",
                                "selected": False,
                                "show": True,
                            },
                            {
                                "icon": "icon-survey",
                                "name": "Panel",
                                "description": "Basic component to display content in a survey",
                                "type": "panel",
                                "component": "panel",
                                "elements": [
                                    {
                                        "icon": "icon-chat-2to1",
                                        "name": "Chat",
                                        "description": "Creates a new chat workitem with a customer",
                                        "type": "chat",
                                        "component": "chat",
                                        "elements": [],
                                        "properties": {
                                            "label": "Chat Now !",
                                            "fontSize": "14",
                                            "buttonWidth": "120px",
                                            "buttonPadding": "8px",
                                            "buttonMargin": "8px",
                                            "campaignId": "",
                                            "name": "firstName",
                                            "email": "email",
                                            "messages": [],
                                            "attachedData": [
                                                {
                                                    "label": "firstName",
                                                    "value": "${surveyInformation.firstName.value}",
                                                },
                                                {
                                                    "label": "lastName",
                                                    "value": "${surveyInformation.lastName.value}",
                                                },
                                                {
                                                    "label": "email",
                                                    "value": "${surveyInformation.email.value}",
                                                },
                                                {
                                                    "label": "phone",
                                                    "value": "${surveyInformation.phone.value}",
                                                },
                                                {
                                                    "label": "contactType",
                                                    "value": "${surveyInformation.contactType.value}",
                                                },
                                                {
                                                    "label": "interest",
                                                    "value": "${surveyInformation.interest.value}",
                                                },
                                            ],
                                            "successVariables": [],
                                            "onSuccess": "panel",
                                            "successPanelId": "67bab0c828e6999992721ad8",
                                            "errorVariables": [],
                                            "onError": "panel",
                                            "errorPanelId": "67ba83b975fec76053ef0cda",
                                            "style": "<style>\ndiv {\n  border: 0px solid;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.2), 0 3px 10px 0 rgba(0, 0, 0, 0.19);\n  background-size: cover;\n  background-position: center;\n}\n</style>",
                                        },
                                        "_id": "67baacd7d0a89aab13762922",
                                        "selected": False,
                                        "show": True,
                                    },
                                    {
                                        "icon": "icon-ui-text",
                                        "name": "Text",
                                        "description": "Displays direct text to the customer",
                                        "type": "label",
                                        "component": "label",
                                        "elements": [],
                                        "properties": {
                                            "label": "<strong>OR</strong>",
                                            "fontSize": 16,
                                            "width": "",
                                            "margin": "8px",
                                            "alignment": "left",
                                        },
                                        "_id": "67baacdc583c2a1b805c71a8",
                                        "selected": False,
                                        "show": True,
                                    },
                                    {
                                        "icon": "icon-callback",
                                        "name": "Web Callback",
                                        "description": "Creates an outbound call to a specific number at a specific time",
                                        "type": "webcallback",
                                        "component": "webcallback",
                                        "elements": [],
                                        "properties": {
                                            "label": "Just Call Me !",
                                            "fontSize": "14",
                                            "buttonWidth": "120px",
                                            "buttonPadding": "8px",
                                            "buttonMargin": "8px",
                                            "campaignId": "",
                                            "phone": "phone",
                                            "attachedData": [],
                                            "successVariables": [],
                                            "onSuccess": "panel",
                                            "successPanelId": "67bab7f50abc94038d5d0e2d",
                                            "errorVariables": [],
                                            "onError": "panel",
                                            "errorPanelId": "67ba83b975fec76053ef0cda",
                                            "style": "<style>\ndiv {\n  border: 0px solid;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.2), 0 3px 10px 0 rgba(0, 0, 0, 0.19);\n  background-size: cover;\n  background-position: center;\n}\n</style>",
                                        },
                                        "_id": "67baacfed9fad6c9fd7913be",
                                        "selected": False,
                                        "show": True,
                                    },
                                ],
                                "properties": {
                                    "label": "",
                                    "labelAlignment": "left",
                                    "labelFontSize": "24",
                                    "descriptionAlignment": "left",
                                    "descriptionFontSize": "24",
                                    "tabLabel": "Chat and Call Buttons",
                                    "alignment": "center",
                                    "canCollapse": False,
                                    "state": False,
                                    "scroll": False,
                                    "showScrollbar": False,
                                    "vertical": "fit",
                                    "direction": "row",
                                    "margin": "8px",
                                    "panelShadow": False,
                                    "showOverlay": False,
                                    "showHeader": False,
                                    "allowPanelInDashboard": False,
                                },
                                "_id": "67baaccf00bc3e188076bf30",
                                "selected": False,
                                "show": True,
                            },
                            {
                                "icon": "icon-survey",
                                "name": "Panel",
                                "description": "Basic component to display content in a survey",
                                "type": "panel",
                                "component": "panel",
                                "elements": [
                                    {
                                        "icon": "icon-queues-data",
                                        "name": "Availability",
                                        "description": "Agent availability in queues",
                                        "type": "availability",
                                        "component": "availability",
                                        "elements": [],
                                        "properties": {
                                            "label": "Available Agents",
                                            "fontSize": 14,
                                            "textFontSize": "14",
                                            "buttonWidth": "",
                                            "buttonPadding": "8px",
                                            "buttonMargin": "8px",
                                            "queues": queues,
                                            "medias": ["chat", "voice"],
                                        },
                                        "_id": "67baae17296c3677732b9cf8",
                                        "selected": False,
                                        "show": True,
                                    }
                                ],
                                "properties": {
                                    "label": "",
                                    "labelAlignment": "left",
                                    "labelFontSize": "24",
                                    "descriptionAlignment": "left",
                                    "descriptionFontSize": "24",
                                    "alignment": "justify",
                                    "canCollapse": False,
                                    "state": False,
                                    "scroll": False,
                                    "showScrollbar": False,
                                    "vertical": "full",
                                    "direction": "column",
                                    "margin": "10px",
                                    "panelShadow": False,
                                    "showOverlay": False,
                                    "showHeader": False,
                                    "allowPanelInDashboard": False,
                                },
                                "_id": "67cb4195133ccdd0e41c9a36",
                                "selected": False,
                                "show": True,
                            },
                            {
                                "icon": "icon-survey",
                                "name": "Panel",
                                "description": "Basic component to display content in a survey",
                                "type": "panel",
                                "component": "panel",
                                "elements": [
                                    {
                                        "icon": "icon-ui-move-to-panel",
                                        "name": "Move To Panel",
                                        "description": "Moves to a specific panel in a survey",
                                        "type": "move",
                                        "component": "move",
                                        "elements": [],
                                        "properties": {
                                            "label": "< < Go Back to Main",
                                            "fontSize": 16,
                                            "buttonWidth": "60%",
                                            "buttonPadding": "8px",
                                            "buttonMargin": "8px",
                                            "variables": [],
                                            "panelId": "67ba83b975fec76053ef0cda",
                                            "hideApplication": False,
                                            "style": "<style>\ndiv {\n  border: 0px solid;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.2), 0 3px 10px 0 rgba(0, 0, 0, 0.19);\n  background-size: cover;\n  background-position: center;\n}\n</style>",
                                            "sendMessageToWorkflow": False,
                                            "properties": [],
                                        },
                                        "_id": "67baaeddd5d7faeace559990",
                                        "selected": False,
                                        "show": True,
                                    }
                                ],
                                "properties": {
                                    "label": "",
                                    "labelAlignment": "left",
                                    "labelFontSize": "24",
                                    "descriptionAlignment": "left",
                                    "descriptionFontSize": "24",
                                    "tabLabel": "Go Back to Main",
                                    "alignment": "justify",
                                    "canCollapse": False,
                                    "state": False,
                                    "scroll": False,
                                    "showScrollbar": False,
                                    "vertical": "full",
                                    "direction": "column",
                                    "panelShadow": False,
                                    "showOverlay": False,
                                    "showHeader": False,
                                    "allowPanelInDashboard": False,
                                },
                                "_id": "67baaed3c2b12ca1b310c59c",
                                "selected": False,
                                "show": True,
                            },
                        ],
                        "properties": {
                            "label": "",
                            "labelAlignment": "left",
                            "labelFontSize": "24",
                            "descriptionAlignment": "left",
                            "descriptionFontSize": "24",
                            "tabLabel": "Chat or Call Me",
                            "alignment": "justify",
                            "canCollapse": False,
                            "state": False,
                            "scroll": False,
                            "showScrollbar": False,
                            "vertical": "full",
                            "direction": "column",
                            "margin": "8px",
                            "panelBackgroundColor": "#ffffff",
                            "panelShadow": True,
                            "panelBorderRadius": "16px",
                            "showOverlay": False,
                            "showHeader": False,
                            "allowPanelInDashboard": False,
                            "main": True,
                        },
                        "_id": "67ba9c7488f1ea7e2caf1493",
                        "panelId": "refId1740271004938",
                        "selected": False,
                        "show": True,
                    },
                    {
                        "icon": "icon-survey",
                        "name": "Panel",
                        "description": "Basic component to display content in a survey",
                        "type": "panel",
                        "component": "panel",
                        "elements": [
                            {
                                "icon": "icon-ui-header",
                                "name": "Header",
                                "description": "Displays navigation buttons at the top of a survey",
                                "type": "header",
                                "component": "header",
                                "elements": [],
                                "properties": {
                                    "showPrevious": False,
                                    "showOptions": False,
                                    "icon": "icon-next",
                                    "showClose": True,
                                    "size": "24",
                                    "titleFontSize": "24",
                                },
                                "_id": "67bab0ef098c2bdc2977f569",
                                "selected": False,
                                "show": True,
                            },
                            {
                                "icon": "icon-unlocked",
                                "name": "Waiting for Agent",
                                "description": "Presents a message while waiting for an agent to become available",
                                "type": "waiting",
                                "component": "waiting",
                                "elements": [],
                                "properties": {
                                    "label": "",
                                    "labelAlignment": "left",
                                    "labelFontSize": "24",
                                    "descriptionAlignment": "left",
                                    "descriptionFontSize": "24",
                                    "waitingMsgFontSize": 24,
                                    "waitingIcon": "icon-clock",
                                    "waitingIconFontSize": 120,
                                    "waitingIconColor": "#000000",
                                    "vertical": "full",
                                    "alignment": "center",
                                    "verticalAlignment": "justify",
                                    "direction": "column",
                                    "margin": "8px",
                                    "onAgentAvailable": "panel",
                                    "onAgentAvailablePanelId": "67bab29d274160f7818b2e48",
                                    "timer": 30,
                                    "onTerminate": "panel",
                                    "terminatePanelId": "67bb7af7b864de0999f625c7",
                                    "useReverseProxy": False,
                                },
                                "_id": "67bab17e300cd198ec1ed7ad",
                                "selected": False,
                                "show": True,
                            },
                        ],
                        "properties": {
                            "label": "",
                            "labelAlignment": "left",
                            "labelFontSize": "24",
                            "descriptionAlignment": "left",
                            "descriptionFontSize": "24",
                            "tabLabel": "Waiting for Chat",
                            "alignment": "justify",
                            "canCollapse": False,
                            "state": False,
                            "scroll": False,
                            "showScrollbar": False,
                            "vertical": "full",
                            "direction": "column",
                            "panelBackgroundColor": "#ffffff",
                            "panelShadow": True,
                            "panelBorderRadius": "16px",
                            "showOverlay": False,
                            "showHeader": False,
                            "allowPanelInDashboard": False,
                            "main": True,
                        },
                        "_id": "67bab0c828e6999992721ad8",
                        "panelId": "refId1740271015057",
                        "selected": False,
                        "show": True,
                    },
                    {
                        "icon": "icon-survey",
                        "name": "Panel",
                        "description": "Basic component to display content in a survey",
                        "type": "panel",
                        "component": "panel",
                        "elements": [
                            {
                                "icon": "icon-ui-header",
                                "name": "Header",
                                "description": "Displays navigation buttons at the top of a survey",
                                "type": "header",
                                "component": "header",
                                "elements": [],
                                "properties": {
                                    "showPrevious": False,
                                    "showOptions": False,
                                    "icon": "icon-next",
                                    "showClose": True,
                                    "size": "24",
                                    "titleFontSize": "24",
                                },
                                "_id": "67bab2a41413abd1a457e5f1",
                                "selected": False,
                                "show": True,
                            },
                            {
                                "icon": "icon-chat-1to2",
                                "name": "Chat Panel",
                                "description": "A Thrio resource to send messages to and from a customers device",
                                "type": "conversation",
                                "component": "conversation",
                                "elements": [],
                                "properties": {
                                    "vertical": "full",
                                    "margin": "8px",
                                    "allowAttachments": True,
                                    "allowVoiceMessage": True,
                                    "allowEmoji": True,
                                    "onTerminate": "panel",
                                    "terminatePanelId": "67bb7af7b864de0999f625c7",
                                },
                                "_id": "67bab2caebd3b5081a54c27b",
                                "selected": False,
                                "show": True,
                            },
                        ],
                        "properties": {
                            "label": "",
                            "labelAlignment": "left",
                            "labelFontSize": "24",
                            "descriptionAlignment": "left",
                            "descriptionFontSize": "24",
                            "tabLabel": "Chat Window",
                            "alignment": "justify",
                            "canCollapse": False,
                            "state": False,
                            "scroll": False,
                            "showScrollbar": False,
                            "vertical": "full",
                            "direction": "column",
                            "panelBackgroundColor": "#ffffff",
                            "panelShadow": True,
                            "panelBorderRadius": "16px",
                            "showOverlay": False,
                            "showHeader": False,
                            "allowPanelInDashboard": False,
                            "main": True,
                        },
                        "_id": "67bab29d274160f7818b2e48",
                        "panelId": "refId1740271016085",
                        "selected": False,
                        "show": True,
                    },
                    {
                        "icon": "icon-survey",
                        "name": "Panel",
                        "description": "Basic component to display content in a survey",
                        "type": "panel",
                        "component": "panel",
                        "elements": [
                            {
                                "icon": "icon-survey",
                                "name": "Panel",
                                "description": "Basic component to display content in a survey",
                                "type": "panel",
                                "component": "panel",
                                "elements": [
                                    {
                                        "icon": "icon-ui-text",
                                        "name": "Text",
                                        "description": "Displays direct text to the customer",
                                        "type": "label",
                                        "component": "label",
                                        "elements": [],
                                        "properties": {
                                            "label": "<strong>Thank you! An agent will call you shortly.</strong>",
                                            "fontSize": 16,
                                            "margin": "8px",
                                            "alignment": "center",
                                        },
                                        "_id": "67bb57ed781ff89c13b0fb81",
                                        "selected": False,
                                        "show": True,
                                    }
                                ],
                                "properties": {
                                    "label": "",
                                    "labelAlignment": "left",
                                    "labelFontSize": "24",
                                    "descriptionAlignment": "left",
                                    "descriptionFontSize": "24",
                                    "tabLabel": "Thank you message",
                                    "alignment": "justify",
                                    "canCollapse": False,
                                    "state": False,
                                    "scroll": False,
                                    "showScrollbar": False,
                                    "vertical": "fit",
                                    "direction": "column",
                                    "panelShadow": False,
                                    "showOverlay": False,
                                    "showHeader": False,
                                    "allowPanelInDashboard": False,
                                },
                                "_id": "67bb57e4b09799834d812402",
                                "selected": False,
                                "show": True,
                            },
                            {
                                "icon": "icon-survey",
                                "name": "Panel",
                                "description": "Basic component to display content in a survey",
                                "type": "panel",
                                "component": "panel",
                                "elements": [
                                    {
                                        "icon": "icon-ui-move-to-panel",
                                        "name": "Move To Panel",
                                        "description": "Moves to a specific panel in a survey",
                                        "type": "move",
                                        "component": "move",
                                        "elements": [],
                                        "properties": {
                                            "label": "< < Go Back to Main",
                                            "fontSize": 16,
                                            "buttonWidth": "60%",
                                            "buttonPadding": "8px",
                                            "buttonMargin": "8px",
                                            "variables": [],
                                            "panelId": "67ba83b975fec76053ef0cda",
                                            "hideApplication": False,
                                            "style": "<style>\ndiv {\n  border: 0px solid;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.2), 0 3px 10px 0 rgba(0, 0, 0, 0.19);\n  background-size: cover;\n  background-position: center;\n}\n</style>",
                                            "sendMessageToWorkflow": False,
                                            "properties": [],
                                        },
                                        "_id": "67bb5852630f4f0040a0ae3f",
                                        "selected": False,
                                        "show": True,
                                    }
                                ],
                                "properties": {
                                    "label": "",
                                    "labelAlignment": "left",
                                    "labelFontSize": "24",
                                    "descriptionAlignment": "left",
                                    "descriptionFontSize": "24",
                                    "tabLabel": "Go Back to Main",
                                    "alignment": "justify",
                                    "canCollapse": False,
                                    "state": False,
                                    "scroll": False,
                                    "showScrollbar": False,
                                    "vertical": "fit",
                                    "direction": "column",
                                    "panelShadow": False,
                                    "showOverlay": False,
                                    "showHeader": False,
                                    "allowPanelInDashboard": False,
                                },
                                "_id": "67bb5849978b26f1b348168d",
                                "selected": False,
                                "show": True,
                            },
                            {
                                "icon": "icon-survey",
                                "name": "Panel",
                                "description": "Basic component to display content in a survey",
                                "type": "panel",
                                "component": "panel",
                                "elements": [],
                                "properties": {
                                    "label": "",
                                    "labelAlignment": "left",
                                    "labelFontSize": "24",
                                    "descriptionAlignment": "left",
                                    "descriptionFontSize": "24",
                                    "tabLabel": "Survey Button",
                                    "alignment": "justify",
                                    "canCollapse": False,
                                    "state": False,
                                    "scroll": False,
                                    "showScrollbar": False,
                                    "vertical": "fit",
                                    "direction": "column",
                                    "panelShadow": False,
                                    "showOverlay": False,
                                    "showHeader": False,
                                    "allowPanelInDashboard": False,
                                    "main": True,
                                },
                                "_id": "67bb58b011e50c181a75b722",
                                "selected": False,
                                "show": True,
                                "panelId": "refId1740330606228",
                            },
                        ],
                        "properties": {
                            "label": "",
                            "labelAlignment": "left",
                            "labelFontSize": "24",
                            "descriptionAlignment": "left",
                            "descriptionFontSize": "24",
                            "tabLabel": "Callback in Progress",
                            "alignment": "justify",
                            "canCollapse": False,
                            "state": False,
                            "scroll": False,
                            "showScrollbar": False,
                            "vertical": "full",
                            "direction": "column",
                            "margin": "8px",
                            "panelBackgroundColor": "#ffffff",
                            "panelShadow": True,
                            "panelBorderRadius": "16px",
                            "showOverlay": False,
                            "showHeader": False,
                            "allowPanelInDashboard": False,
                            "main": True,
                        },
                        "_id": "67bab7f50abc94038d5d0e2d",
                        "panelId": "refId1740271016816",
                        "selected": False,
                        "show": True,
                    },
                    {
                        "icon": "icon-survey",
                        "name": "Panel",
                        "description": "Basic component to display content in a survey",
                        "type": "panel",
                        "component": "panel",
                        "elements": [
                            {
                                "icon": "icon-survey",
                                "name": "Panel",
                                "description": "Basic component to display content in a survey",
                                "type": "panel",
                                "component": "panel",
                                "elements": [
                                    {
                                        "icon": "icon-ui-text",
                                        "name": "Text",
                                        "description": "Displays direct text to the customer",
                                        "type": "label",
                                        "component": "label",
                                        "elements": [],
                                        "properties": {
                                            "label": "See you again soon!",
                                            "fontSize": 18,
                                            "margin": "20px 8px 8px 8px",
                                            "alignment": "center",
                                        },
                                        "_id": "67bb7b39c0fbe0086b8acef4",
                                        "selected": False,
                                        "show": True,
                                    }
                                ],
                                "properties": {
                                    "label": "",
                                    "labelAlignment": "left",
                                    "labelFontSize": "24",
                                    "descriptionAlignment": "left",
                                    "descriptionFontSize": "24",
                                    "alignment": "justify",
                                    "canCollapse": False,
                                    "state": False,
                                    "scroll": False,
                                    "showScrollbar": False,
                                    "vertical": "fit",
                                    "direction": "column",
                                    "panelShadow": False,
                                    "showOverlay": False,
                                    "showHeader": False,
                                    "allowPanelInDashboard": False,
                                },
                                "_id": "67bb7b0bbb9898c16b2bc50b",
                                "selected": False,
                                "show": True,
                            },
                            {
                                "icon": "icon-survey",
                                "name": "Panel",
                                "description": "Basic component to display content in a survey",
                                "type": "panel",
                                "component": "panel",
                                "elements": [
                                    {
                                        "icon": "icon-ui-move-to-panel",
                                        "name": "Move To Panel",
                                        "description": "Moves to a specific panel in a survey",
                                        "type": "move",
                                        "component": "move",
                                        "elements": [],
                                        "properties": {
                                            "label": "< < Back to Main",
                                            "fontSize": 16,
                                            "buttonWidth": "200px",
                                            "buttonPadding": "8px",
                                            "buttonMargin": "8px",
                                            "variables": [],
                                            "panelId": "67ba83b975fec76053ef0cda",
                                            "hideApplication": False,
                                            "style": "<style>\ndiv {\n  border: 0px solid;\n  border-radius: 8px;\n  box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.2), 0 3px 10px 0 rgba(0, 0, 0, 0.19);\n  background-size: cover;\n  background-position: center;\n}\n</style>",
                                            "sendMessageToWorkflow": False,
                                            "properties": [],
                                        },
                                        "_id": "67bb7b6bbfa6a227d89e9b79",
                                        "selected": False,
                                        "show": True,
                                    }
                                ],
                                "properties": {
                                    "label": "",
                                    "labelAlignment": "left",
                                    "labelFontSize": "24",
                                    "descriptionAlignment": "left",
                                    "descriptionFontSize": "24",
                                    "tabLabel": "Back to Main",
                                    "alignment": "justify",
                                    "canCollapse": False,
                                    "state": False,
                                    "scroll": False,
                                    "showScrollbar": False,
                                    "vertical": "full",
                                    "direction": "column",
                                    "panelShadow": False,
                                    "panelBorderRadius": "",
                                    "showOverlay": False,
                                    "showHeader": False,
                                    "allowPanelInDashboard": False,
                                },
                                "_id": "67bb7b651269e8286a2c1577",
                                "selected": False,
                                "show": True,
                            },
                        ],
                        "properties": {
                            "label": "",
                            "labelAlignment": "left",
                            "labelFontSize": "24",
                            "descriptionAlignment": "left",
                            "descriptionFontSize": "24",
                            "tabLabel": "Thanks for chatting",
                            "alignment": "justify",
                            "canCollapse": False,
                            "state": False,
                            "scroll": False,
                            "showScrollbar": False,
                            "vertical": "full",
                            "direction": "column",
                            "panelBackgroundColor": "#ffffff",
                            "panelShadow": True,
                            "panelBorderRadius": "16px",
                            "showOverlay": False,
                            "showHeader": False,
                            "allowPanelInDashboard": False,
                            "main": True,
                        },
                        "_id": "67bb7af7b864de0999f625c7",
                        "panelId": "refId1740330611385",
                        "selected": False,
                        "show": True,
                    },
                ],
                "footer": {
                    "icon": "icon-ui-footer",
                    "name": "Footer",
                    "description": "Displays navigation buttons at the bottom of a survey",
                    "type": "footer",
                    "component": "footer",
                    "elements": [],
                    "properties": {
                        "type": "iconButton",
                        "icon": "icon-next",
                        "size": "24",
                    },
                    "_id": "67ba83b6c4bf85f956b089f6",
                },
                "header": {
                    "icon": "icon-ui-header",
                    "name": "Header",
                    "description": "Displays navigation buttons at the top of a survey",
                    "type": "header",
                    "component": "header",
                    "elements": [],
                    "properties": {
                        "showPrevious": False,
                        "showOptions": False,
                        "icon": "icon-next",
                        "showClose": False,
                        "size": "24",
                        "titleFontSize": "24",
                    },
                    "_id": "67ba83b6ced3dec6151e856c",
                },
                "overlay": {
                    "icon": "icon-ui-panels",
                    "name": "Overlay Panel",
                    "description": "This panel will always be visible and allow the user to minimise or maxime it.",
                    "type": "overlay",
                    "component": "overlay",
                    "elements": [],
                    "properties": {
                        "label": "Overlay Panel",
                        "labelAlignment": "left",
                        "labelFontSize": "24",
                        "descriptionAlignment": "left",
                        "descriptionFontSize": "24",
                        "alignment": "justify",
                        "canCollapse": False,
                        "state": False,
                        "scroll": False,
                        "vertical": "full",
                        "direction": "column",
                        "height": 80,
                    },
                    "_id": "67ba83b60c42fbbaeb633232",
                },
            },
            "name": survey_name,
            "width": 380,
            "showTopNavigatorPage": False,
            "usePanelShadow": False,
            "font": "Rubik:400,400i,700;Rubik, sans-serif",
        }
    )
    headers = {
        "Authorization": ncc_token,
        "Content-Type": "application/json",
    }
    try:
        conn.request("POST", "/data/api/types/survey/", payload, headers)
        res = conn.getresponse()
        if res.status == 201:
            data = res.read().decode("utf-8")
            survey = json.loads(data)
    except:
        pass
    conn.close()
    return survey


def create_csat_survey(
    ncc_location: str,
    ncc_token: str,
    survey_name: str,
    survey_theme_id: str,
    business_name: str,
) -> dict:
    """
    This function creates a survey with a specified name.
    """
    survey = {}
    conn = http.client.HTTPSConnection(ncc_location)
    payload = json.dumps(
        {
            "hideSurveyBoxShadown": False,
            "type": "full",
            "showFooter": False,
            "surveythemeId": survey_theme_id,
            "showTabs": False,
            "showBottomNavigatorPage": False,
            "height": 2000,
            "debug": False,
            "localizations": {"name": {"en": {"language": "en", "value": survey_name}}},
            "showHeader": False,
            "allowTabinationMandatoryFields": False,
            "entryPanelId": "67587ddb162bea724f591c54",
            "layout": {
                "elements": [
                    {
                        "icon": "icon-survey",
                        "name": "Panel",
                        "description": "Basic component to display content in a survey",
                        "type": "panel",
                        "component": "panel",
                        "elements": [
                            {
                                "icon": "icon-survey",
                                "name": "Panel",
                                "description": "Basic component to display content in a survey",
                                "type": "panel",
                                "component": "panel",
                                "elements": [
                                    {
                                        "icon": "icon-ui-text",
                                        "name": "Text",
                                        "description": "Displays direct text to the customer",
                                        "type": "label",
                                        "component": "label",
                                        "elements": [],
                                        "properties": {
                                            "label": "Please answer the questions below.",
                                            "fontSize": "14",
                                            "margin": "10px",
                                            "alignment": "left",
                                            "condition": "",
                                        },
                                        "_id": "67587f3b7b4e5e4954783303",
                                        "selected": False,
                                        "show": True,
                                    },
                                    {
                                        "icon": "icon-ui-rating",
                                        "name": "Rate",
                                        "description": "Star ratings for customer satisfaction",
                                        "type": "rate",
                                        "component": "rate",
                                        "elements": [],
                                        "properties": {
                                            "label": "Overall, how would you rate your experience?",
                                            "labelInReport": "satisfied",
                                            "fontSize": "14",
                                            "fieldname": "satisfied",
                                            "items": 5,
                                            "icon": "icon-star",
                                            "margin": "10px",
                                            "condition": "",
                                            "mandatory": True,
                                        },
                                        "_id": "6758815e89533c64659d3b44",
                                        "selected": False,
                                        "show": True,
                                    },
                                    {
                                        "icon": "icon-ui-radio",
                                        "name": "Radio button",
                                        "description": "Displays mutually exclusive values, and only one can be selected",
                                        "type": "radio",
                                        "component": "radio",
                                        "elements": [],
                                        "properties": {
                                            "label": "Were all of your issues resolved?",
                                            "labelInReport": "resolved",
                                            "fontSize": "14",
                                            "orientation": "horizontal",
                                            "margin": "10px",
                                            "fieldname": "resolved",
                                            "options": [
                                                {"label": "Yes", "value": "Yes"},
                                                {"label": "No", "value": "No"},
                                            ],
                                            "wrapOptions": False,
                                            "condition": "",
                                            "mandatory": True,
                                        },
                                        "_id": "67587eb965f7928ec69ac6a9",
                                        "selected": False,
                                        "show": True,
                                    },
                                    {
                                        "icon": "icon-ui-radio",
                                        "name": "Radio button",
                                        "description": "Displays mutually exclusive values, and only one can be selected",
                                        "type": "radio",
                                        "component": "radio",
                                        "elements": [],
                                        "properties": {
                                            "label": "Was the agent friendly and easy to work with?",
                                            "labelInReport": "friendly",
                                            "fontSize": "14",
                                            "orientation": "horizontal",
                                            "margin": "10px",
                                            "fieldname": "friendly",
                                            "options": [
                                                {"label": "Yes", "value": "Yes"},
                                                {"label": "No", "value": "No"},
                                            ],
                                            "wrapOptions": False,
                                            "condition": "",
                                            "mandatory": True,
                                        },
                                        "_id": "67cc84aae8579d118f04243a",
                                        "selected": False,
                                        "show": True,
                                    },
                                    {
                                        "icon": "icon-ui-radio",
                                        "name": "Radio button",
                                        "description": "Displays mutually exclusive values, and only one can be selected",
                                        "type": "radio",
                                        "component": "radio",
                                        "elements": [],
                                        "properties": {
                                            "label": f"Would you recommend {business_name} to a friend?",
                                            "labelInReport": "wouldRecommend",
                                            "fontSize": "14",
                                            "orientation": "horizontal",
                                            "margin": "10px",
                                            "fieldname": "wouldRecommend",
                                            "options": [
                                                {"label": "Yes", "value": "Yes"},
                                                {"label": "No", "value": "No"},
                                            ],
                                            "wrapOptions": False,
                                            "condition": "",
                                            "mandatory": True,
                                        },
                                        "_id": "67cc84ac1108af642aef92dc",
                                        "selected": False,
                                        "show": True,
                                    },
                                ],
                                "properties": {
                                    "label": "",
                                    "labelAlignment": "left",
                                    "labelFontSize": "24",
                                    "descriptionAlignment": "left",
                                    "descriptionFontSize": "24",
                                    "alignment": "left",
                                    "canCollapse": False,
                                    "state": False,
                                    "scroll": False,
                                    "showScrollbar": False,
                                    "vertical": "fit",
                                    "direction": "column",
                                    "width": "380px",
                                    "panelShadow": False,
                                    "showOverlay": False,
                                    "showHeader": False,
                                    "allowPanelInDashboard": False,
                                },
                                "_id": "67c233b4b76905daffec8b25",
                                "selected": False,
                                "show": True,
                            },
                            {
                                "icon": "icon-survey",
                                "name": "Panel",
                                "description": "Basic component to display content in a survey",
                                "type": "panel",
                                "component": "panel",
                                "elements": [
                                    {
                                        "icon": "icon-ui-move-to-panel",
                                        "name": "Move To Panel",
                                        "description": "Moves to a specific panel in a survey",
                                        "type": "move",
                                        "component": "move",
                                        "elements": [],
                                        "properties": {
                                            "label": "Submit",
                                            "fontSize": 20,
                                            "buttonWidth": "150px",
                                            "buttonPadding": "5px",
                                            "buttonMargin": "20px 0px 0px 0px",
                                            "condition": "",
                                            "variables": [],
                                            "panelId": "675882a32b2a795879d4825a",
                                            "hideApplication": False,
                                            "sendMessageToWorkflow": False,
                                            "properties": [],
                                        },
                                        "_id": "6758833fc882ff56813e1bcb",
                                        "selected": False,
                                        "show": True,
                                    }
                                ],
                                "properties": {
                                    "label": "",
                                    "labelAlignment": "left",
                                    "labelFontSize": "24",
                                    "descriptionAlignment": "left",
                                    "descriptionFontSize": "24",
                                    "alignment": "center",
                                    "canCollapse": False,
                                    "state": False,
                                    "scroll": False,
                                    "showScrollbar": False,
                                    "vertical": "fit",
                                    "direction": "column",
                                    "panelShadow": False,
                                    "showOverlay": False,
                                    "showHeader": False,
                                    "allowPanelInDashboard": False,
                                },
                                "_id": "67c234491cc7c3059688f38b",
                                "selected": False,
                                "show": True,
                            },
                        ],
                        "properties": {
                            "label": "Customer Survey",
                            "labelAlignment": "center",
                            "labelFontSize": 20,
                            "descriptionAlignment": "left",
                            "descriptionFontSize": "24",
                            "tabLabel": "Questions",
                            "alignment": "center",
                            "canCollapse": False,
                            "state": False,
                            "scroll": False,
                            "showScrollbar": False,
                            "vertical": "full",
                            "direction": "column",
                            "width": "",
                            "height": "",
                            "margin": "10px 0px 0px 0px",
                            "panelShadow": False,
                            "showOverlay": False,
                            "showHeader": False,
                            "allowPanelInDashboard": False,
                            "main": True,
                        },
                        "_id": "67587ddb162bea724f591c54",
                        "panelId": "refId1733850804161",
                        "selected": False,
                        "show": True,
                    },
                    {
                        "icon": "icon-survey",
                        "name": "Panel",
                        "description": "Basic component to display content in a survey",
                        "type": "panel",
                        "component": "panel",
                        "elements": [
                            {
                                "icon": "icon-survey",
                                "name": "Panel",
                                "description": "Basic component to display content in a survey",
                                "type": "panel",
                                "component": "panel",
                                "elements": [
                                    {
                                        "icon": "icon-ui-text",
                                        "name": "Text",
                                        "description": "Displays direct text to the customer",
                                        "type": "label",
                                        "component": "label",
                                        "elements": [],
                                        "properties": {
                                            "label": "Customer Survey",
                                            "fontSize": 20,
                                            "margin": "10px",
                                            "alignment": "center",
                                            "condition": "",
                                        },
                                        "_id": "67588a8b99a509d5c8accb37",
                                        "selected": False,
                                        "show": True,
                                    },
                                    {
                                        "icon": "icon-ui-text",
                                        "name": "Text",
                                        "description": "Displays direct text to the customer",
                                        "type": "label",
                                        "component": "label",
                                        "elements": [],
                                        "properties": {
                                            "label": "Thank you for participating in our survey!",
                                            "fontSize": 18,
                                            "margin": "20px 5px 0px 5px",
                                            "alignment": "center",
                                            "condition": "",
                                        },
                                        "_id": "675882c1da170c55bee3e5df",
                                        "selected": False,
                                        "show": True,
                                    },
                                ],
                                "properties": {
                                    "label": "",
                                    "labelAlignment": "left",
                                    "labelFontSize": "24",
                                    "descriptionAlignment": "left",
                                    "descriptionFontSize": "24",
                                    "alignment": "justify",
                                    "canCollapse": False,
                                    "state": False,
                                    "scroll": False,
                                    "showScrollbar": False,
                                    "vertical": "fit",
                                    "direction": "column",
                                    "width": "380px",
                                    "panelShadow": False,
                                    "showOverlay": False,
                                    "showHeader": False,
                                    "allowPanelInDashboard": False,
                                },
                                "_id": "67c235e2c98e6be6dca95df6",
                                "selected": False,
                                "show": True,
                            }
                        ],
                        "properties": {
                            "label": "",
                            "labelAlignment": "center",
                            "labelFontSize": 20,
                            "descriptionAlignment": "left",
                            "descriptionFontSize": "24",
                            "tabLabel": "Success",
                            "alignment": "center",
                            "canCollapse": False,
                            "state": False,
                            "scroll": False,
                            "showScrollbar": False,
                            "vertical": "full",
                            "direction": "column",
                            "panelShadow": False,
                            "showOverlay": False,
                            "showHeader": False,
                            "allowPanelInDashboard": False,
                            "main": True,
                        },
                        "_id": "675882a32b2a795879d4825a",
                        "panelId": "refId1733850804594",
                        "selected": False,
                        "show": True,
                    },
                    {
                        "icon": "icon-survey",
                        "name": "Panel",
                        "description": "Basic component to display content in a survey",
                        "type": "panel",
                        "component": "panel",
                        "elements": [
                            {
                                "icon": "icon-ui-input",
                                "name": "Input",
                                "description": "A box for the customer to enter information",
                                "type": "input",
                                "component": "input",
                                "elements": [],
                                "properties": {
                                    "label": "Workitem ID",
                                    "labelInReport": "relatedWorkitemId",
                                    "fontSize": "14",
                                    "fieldname": "relatedWorkitemId",
                                    "defaultValue": "${workitem.data.relatedWorkitemId}",
                                    "mandatory": False,
                                    "readOnly": False,
                                    "validateOnInput": False,
                                    "sensitiveData": False,
                                    "saveToLocalStorage": False,
                                },
                                "_id": "67c23ea3857421745241ccc3",
                                "selected": False,
                                "show": True,
                            }
                        ],
                        "properties": {
                            "label": "",
                            "labelAlignment": "left",
                            "labelFontSize": "24",
                            "descriptionAlignment": "left",
                            "descriptionFontSize": "24",
                            "tabLabel": "Hidden Data",
                            "alignment": "justify",
                            "canCollapse": False,
                            "state": False,
                            "scroll": False,
                            "showScrollbar": False,
                            "vertical": "full",
                            "direction": "column",
                            "panelShadow": False,
                            "showOverlay": False,
                            "showHeader": False,
                            "allowPanelInDashboard": False,
                            "main": True,
                        },
                        "_id": "67c23e89802b87e1e0ff2349",
                        "panelId": "refId1740779951714",
                        "selected": False,
                        "show": True,
                    },
                ],
                "footer": {
                    "icon": "icon-ui-footer",
                    "name": "Footer",
                    "description": "Displays navigation buttons at the bottom of a survey",
                    "type": "footer",
                    "component": "footer",
                    "elements": [],
                    "properties": {
                        "type": "iconButton",
                        "icon": "icon-next",
                        "size": "24",
                    },
                    "_id": "67587dd20a689edcc2905114",
                },
                "header": {
                    "icon": "icon-ui-header",
                    "name": "Header",
                    "description": "Displays navigation buttons at the top of a survey",
                    "type": "header",
                    "component": "header",
                    "elements": [],
                    "properties": {
                        "showPrevious": False,
                        "showOptions": False,
                        "icon": "icon-next",
                        "showClose": False,
                        "size": "24",
                        "titleFontSize": "24",
                    },
                    "_id": "67587dd261c269fdd16e0c6d",
                },
                "overlay": {
                    "icon": "icon-ui-panels",
                    "name": "Overlay Panel",
                    "description": "This panel will always be visible and allow the user to minimise or maxime it.",
                    "type": "overlay",
                    "component": "overlay",
                    "elements": [],
                    "properties": {
                        "label": "Overlay Panel",
                        "labelAlignment": "left",
                        "labelFontSize": "24",
                        "descriptionAlignment": "left",
                        "descriptionFontSize": "24",
                        "alignment": "justify",
                        "canCollapse": False,
                        "state": False,
                        "scroll": False,
                        "vertical": "full",
                        "direction": "column",
                        "height": 80,
                    },
                    "_id": "67587dd29ee287d4b1f3f11a",
                },
            },
            "name": survey_name,
            "width": 380,
            "showTopNavigatorPage": False,
            "usePanelShadow": False,
            "font": "Rubik:400,400i,700;Rubik, sans-serif",
        }
    )
    headers = {
        "Authorization": ncc_token,
        "Content-Type": "application/json",
    }
    try:
        conn.request("POST", "/data/api/types/survey/", payload, headers)
        res = conn.getresponse()
        if res.status == 201:
            data = res.read().decode("utf-8")
            survey = json.loads(data)
    except:
        pass
    conn.close()
    return survey


def update_chat_survey_campaign_id(
    ncc_location: str, ncc_token: str, survey_id: str, campaign_id: str
) -> bool:
    """
    This function updates the campaign ID associated with two buttons on the chat survey.
    """
    success = False
    survey = get_survey(ncc_location, ncc_token, survey_id)
    if survey != {}:
        conn = http.client.HTTPSConnection(ncc_location)
        survey["layout"]["elements"][1]["elements"][3]["elements"][0]["properties"][
            "campaignId"
        ] = campaign_id
        survey["layout"]["elements"][1]["elements"][3]["elements"][2]["properties"][
            "campaignId"
        ] = campaign_id
        payload = json.dumps(survey)
        headers = {
            "Authorization": ncc_token,
            "Content-Type": "application/json",
        }
        try:
            conn.request(
                "PATCH",
                f"/data/api/types/survey/{survey_id}",
                payload,
                headers,
            )
            res = conn.getresponse()
            if res.status == 200:
                success = True
        except:
            pass
        conn.close()
    return success


def delete_survey(ncc_location: str, ncc_token: str, survey_id: str) -> bool:
    """
    This function deletes a survey with the specified survey ID.
    """
    success = False
    conn = http.client.HTTPSConnection(ncc_location)
    payload = ""
    headers = {"Authorization": ncc_token}
    try:
        conn.request("DELETE", f"/data/api/types/survey/{survey_id}", payload, headers)
        res = conn.getresponse()
        if res.status == 204:
            success = True
    except:
        pass
    conn.close()
    return success
